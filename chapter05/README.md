### 05虚拟机栈

由于跨平台性的设计，Java的指令都是根据栈来设计的。不同平台CPU架
构不同，所以不能设计为基于寄存器的。
**优点是跨平台，指令集小，编译器容易实现，缺点是性能下降，实现同样**
**的功能需要更多的指令。**

 有不少Java开发人员一*提到Java内存结构，就会非常粗粒度地将JVM中的内存区理解为仅有Java堆(heap)和Java栈(stack)?为什么?

 ![image-20200503222159421](/Users/piwenjing/Library/Application Support/typora-user-images/image-20200503222159421.png)

堆，来解决数据的存储问题，主体的数据都在堆中放，当然也不是全部，对象呢主要是在堆中放的。**那如果你要是方法内的一些局部变量的话，是放在栈中，当然这变量是基本数据类型。引用数据类型的话呢，在栈空间只是放这个对象的一个引用只要是对象，都是在堆空间**。所以主体上数据都放在堆空间，栈空间它也是可以放一些数据的，局部变量的一些基本类型的数据或者引用的对象的一个地址，也是放在这个栈中。堆的大小可以设置，方法区因为是本地物理内存，最大，堆第二。

**Java虚批机桟是什么?**
Java虚似机栈(Java Virtual Machine Stack) ，早期也叫Java栈。
毎个线程在创建吋都会创建一个虚拟机栈，其内部保存一个个的栈帧(stack Frame) ，对应着一次次的Java方法凋用。

**是线程私有的**

**生命周期**
生命周期和线程一致。
**作用**
主管Java程序的运行，它保存方法的局部变量（8种基本数据类型、对象的引用地址）、部分结果，并参与方法的调用和返回。

- 局部变量 VS 成员变量（或属性）
- 基本数据变量 VS 引用类型变量（类、数组、接口）



栈顶顶方法叫做当前方法

![image-20200503235304345](/Users/piwenjing/Library/Application Support/typora-user-images/image-20200503235304345.png)

栈的特点(优点)
●栈是一种快速有效的分配存储方式，访问速度仅次于程序计数器。
●JVM直接对Java栈的操作只有两个:
➢每个方法执行，伴随着进栈(入栈、压栈)
➢执行结束后的出栈工作
●对于栈来说不存在垃圾回收问题

​	栈存在OOM，不存在GC （因为只有进栈出栈的操作）

 <!--程序计数器不存在GC,也不存在OOM，因为它只存一个地址-->

